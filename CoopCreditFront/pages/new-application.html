<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoopCredit - Nueva Solicitud</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="../css/styles.css">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
</head>

<body class="bg-slate-50 font-sans">

    <!-- Navbar -->
    <nav class="bg-white shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div
                        class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/30">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                            </path>
                        </svg>
                    </div>
                    <span class="text-xl font-bold text-slate-800">CoopCredit</span>
                </div>

                <!-- Back Button -->
                <a href="dashboard.html"
                    class="px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors duration-200">
                    ‚Üê Volver al Dashboard
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">Nueva Solicitud de Cr√©dito</h1>
            <p class="text-slate-600">Completa el formulario para solicitar tu cr√©dito</p>
        </div>

        <!-- Form Card -->
        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-8">

            <!-- Alert Message (hidden by default) -->
            <div id="alert" class="hidden mb-6 p-4 rounded-xl text-sm font-medium"></div>

            <form id="applicationForm" class="space-y-6">

                <!-- Amount Section -->
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2">Informaci√≥n del
                        Cr√©dito</h3>

                    <!-- Requested Amount -->
                    <div>
                        <label for="requestedAmount" class="block text-sm font-medium text-slate-700 mb-2">
                            Monto Solicitado (COP) *
                        </label>
                        <div class="relative">
                            <span class="absolute left-4 top-3 text-slate-500">$</span>
                            <input type="number" id="requestedAmount" name="requestedAmount" required min="1000000"
                                max="50000000" step="100000"
                                class="w-full pl-8 pr-4 py-3 border border-slate-300 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                placeholder="10000000">
                        </div>
                        <p class="text-xs text-slate-500 mt-1">M√≠nimo: $1,000,000 - M√°ximo: $50,000,000</p>
                    </div>

                    <!-- Term Months -->
                    <div>
                        <label for="termMonths" class="block text-sm font-medium text-slate-700 mb-2">
                            Plazo (meses) *
                        </label>
                        <input type="number" id="termMonths" name="termMonths" required min="6" max="60"
                            class="w-full px-4 py-3 border border-slate-300 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                            placeholder="24">
                        <p class="text-xs text-slate-500 mt-1">Entre 6 y 60 meses</p>
                    </div>

                    <!-- Interest Rate -->
                    <div>
                        <label for="interestRate" class="block text-sm font-medium text-slate-700 mb-2">
                            Tasa de Inter√©s Mensual (%) *
                        </label>
                        <input type="number" id="interestRate" name="interestRate" required min="0.1" max="5" step="0.1"
                            class="w-full px-4 py-3 border border-slate-300 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                            placeholder="1.5">
                        <p class="text-xs text-slate-500 mt-1">Tasa mensual entre 0.1% y 5%</p>
                    </div>
                </div>

                <!-- Financial Information -->
                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-slate-800 border-b border-slate-200 pb-2">Informaci√≥n
                        Financiera</h3>

                    <!-- Monthly Income -->
                    <div>
                        <label for="monthlyIncome" class="block text-sm font-medium text-slate-700 mb-2">
                            Ingresos Mensuales (COP) *
                        </label>
                        <div class="relative">
                            <span class="absolute left-4 top-3 text-slate-500">$</span>
                            <input type="number" id="monthlyIncome" name="monthlyIncome" required min="0" step="100000"
                                class="w-full pl-8 pr-4 py-3 border border-slate-300 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                placeholder="5000000">
                        </div>
                    </div>

                    <!-- Current Debt -->
                    <div>
                        <label for="currentDebt" class="block text-sm font-medium text-slate-700 mb-2">
                            Deuda Actual (COP) *
                        </label>
                        <div class="relative">
                            <span class="absolute left-4 top-3 text-slate-500">$</span>
                            <input type="number" id="currentDebt" name="currentDebt" required min="0" step="100000"
                                class="w-full pl-8 pr-4 py-3 border border-slate-300 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                                placeholder="500000">
                        </div>
                        <p class="text-xs text-slate-500 mt-1">Suma de todas tus deudas actuales</p>
                    </div>
                </div>

                <!-- Purpose -->
                <div>
                    <label for="purpose" class="block text-sm font-medium text-slate-700 mb-2">
                        Prop√≥sito del Cr√©dito *
                    </label>
                    <textarea id="purpose" name="purpose" required rows="4" maxlength="500"
                        class="w-full px-4 py-3 border border-slate-300 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"
                        placeholder="Describe el prop√≥sito de tu cr√©dito (ej: Compra de veh√≠culo, mejoras del hogar, educaci√≥n, etc.)"></textarea>
                    <p class="text-xs text-slate-500 mt-1">M√°ximo 500 caracteres</p>
                </div>

                <!-- Calculation Preview -->
                <div id="calculationPreview" class="bg-blue-50 border border-blue-200 rounded-xl p-6 hidden">
                    <h4 class="text-sm font-semibold text-blue-900 mb-3">Vista Previa del Cr√©dito</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-blue-700">Cuota Mensual Estimada:</span>
                            <span class="font-bold text-blue-900" id="monthlyPayment">$0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-blue-700">Total a Pagar:</span>
                            <span class="font-bold text-blue-900" id="totalPayment">$0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-blue-700">Ratio Deuda/Ingreso:</span>
                            <span class="font-bold text-blue-900" id="debtRatio">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Submit Buttons -->
                <div class="flex space-x-4">
                    <button type="button" id="calculateBtn"
                        class="flex-1 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
                        Calcular Cuota
                    </button>
                    <button type="submit" id="submitBtn"
                        class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg shadow-blue-500/30 hover:shadow-blue-600/30 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]">
                        Enviar Solicitud
                    </button>
                </div>
            </form>
        </div>

        <!-- Info Card -->
        <div class="mt-6 bg-blue-50 border border-blue-200 rounded-xl p-6">
            <h3 class="text-sm font-semibold text-blue-900 mb-3">üìã Requisitos para la Aprobaci√≥n</h3>
            <ul class="space-y-2 text-sm text-blue-800">
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5" fill="currentColor"
                        viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <span>Afiliaci√≥n m√≠nima de 3 meses</span>
                </li>
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5" fill="currentColor"
                        viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <span>Ratio deuda/ingreso m√°ximo del 40%</span>
                </li>
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5" fill="currentColor"
                        viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <span>Monto m√°ximo: 10 veces tu salario mensual</span>
                </li>
                <li class="flex items-start">
                    <svg class="w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5" fill="currentColor"
                        viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <span>No tener solicitudes pendientes</span>
                </li>
            </ul>
        </div>
    </main>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2">
        <!-- Toasts will be inserted here -->
    </div>

    <!-- Scripts -->
    <script src="../js/api.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/new-application.js"></script>
</body>

</html>